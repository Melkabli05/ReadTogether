import{a as Pe,c as Ue,d as Ge,e as He,f as ze,g as Je}from"./chunk-3ZLBCQRX.js";import{e as Le,h as Ve,j as Be,k as $e,l as Ne,n as je}from"./chunk-RDGXNE5M.js";import{a as Ae}from"./chunk-NJ5UAEOY.js";import{a as Fe}from"./chunk-ZFECZHP2.js";import{b as Ie}from"./chunk-BBK6OASQ.js";import{Ia as ke,Ya as Oe,a as _e,ba as Se,c as ve,d as Ce,e as we,h as Y,hb as Re,na as xe,oa as De,pa as Ee,qa as k,ta as Z,wa as X}from"./chunk-5KZPAB2C.js";import"./chunk-AOVFH7ZY.js";import{a as Me}from"./chunk-MUT2TRFX.js";import{a as Te}from"./chunk-BW2BEZL2.js";import"./chunk-X5YLR3NI.js";import{$a as H,$b as K,Bb as w,Cb as v,Db as J,Eb as V,Fb as D,Hb as E,Ib as I,Ma as h,Mb as de,O as R,Ob as q,P as j,Pb as Q,Qb as W,Ra as se,Rb as C,Sb as me,T as F,Vb as ge,Wb as be,Xa as U,Xb as fe,Y as y,Ya as G,Z as _,ab as M,ac as $,bc as ye,ga as O,kb as z,kc as ue,la as P,rb as g,sb as m,tb as u,ub as A,vb as re,wb as le,xb as L,xc as S,yb as ce}from"./chunk-24QFR54W.js";import{i as p}from"./chunk-ODN5LVDJ.js";var Xe=["*"],et={root:"p-avatar-group p-component"},qe=(()=>{class o extends Z{name="avatargroup";classes=et;static \u0275fac=(()=>{let e;return function(t){return(e||(e=P(o)))(t||o)}})();static \u0275prov=R({token:o,factory:o.\u0275fac})}return o})();var tt=(()=>{class o extends X{styleClass;style;get hostClass(){return this.styleClass}get hostStyle(){return this.style}_componentStyle=F(qe);static \u0275fac=(()=>{let e;return function(t){return(e||(e=P(o)))(t||o)}})();static \u0275cmp=U({type:o,selectors:[["p-avatarGroup"],["p-avatar-group"],["p-avatargroup"]],hostVars:8,hostBindings:function(i,t){i&2&&(Q(t.hostStyle),W(t.hostClass),q("p-avatar-group",!0)("p-component",!0))},inputs:{styleClass:"styleClass",style:"style"},features:[K([qe]),H],ngContentSelectors:Xe,decls:1,vars:0,template:function(i,t){i&1&&(J(),V(0))},dependencies:[Y,k],encapsulation:2,changeDetection:0})}return o})(),Qe=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=G({type:o});static \u0275inj=j({imports:[tt,k,k]})}return o})();var nt=["header"],at=["title"],it=["subtitle"],ot=["content"],st=["footer"],rt=["*",[["p-header"]],[["p-footer"]]],lt=["*","p-header","p-footer"];function ct(o,a){o&1&&L(0)}function dt(o,a){if(o&1&&(m(0,"div",8),V(1,1),M(2,ct,1,0,"ng-container",6),u()),o&2){let e=v();h(2),g("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function mt(o,a){if(o&1&&(re(0),C(1),le()),o&2){let e=v(2);h(),me(e.header)}}function ut(o,a){o&1&&L(0)}function pt(o,a){if(o&1&&(m(0,"div",9),M(1,mt,2,1,"ng-container",10)(2,ut,1,0,"ng-container",6),u()),o&2){let e=v();h(),g("ngIf",e.header&&!e._titleTemplate&&!e.titleTemplate),h(),g("ngTemplateOutlet",e.titleTemplate||e._titleTemplate)}}function ht(o,a){if(o&1&&(re(0),C(1),le()),o&2){let e=v(2);h(),me(e.subheader)}}function gt(o,a){o&1&&L(0)}function bt(o,a){if(o&1&&(m(0,"div",11),M(1,ht,2,1,"ng-container",10)(2,gt,1,0,"ng-container",6),u()),o&2){let e=v();h(),g("ngIf",e.subheader&&!e._subtitleTemplate&&!e.subtitleTemplate),h(),g("ngTemplateOutlet",e.subtitleTemplate||e._subtitleTemplate)}}function ft(o,a){o&1&&L(0)}function yt(o,a){o&1&&L(0)}function _t(o,a){if(o&1&&(m(0,"div",12),V(1,2),M(2,yt,1,0,"ng-container",6),u()),o&2){let e=v();h(2),g("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}var vt=({dt:o})=>`
.p-card {
    background: ${o("card.background")};
    color: ${o("card.color")};
    box-shadow: ${o("card.shadow")};
    border-radius: ${o("card.border.radius")};
    display: flex;
    flex-direction: column;
}

.p-card-caption {
    display: flex;
    flex-direction: column;
    gap: ${o("card.caption.gap")};
}

.p-card-body {
    padding: ${o("card.body.padding")};
    display: flex;
    flex-direction: column;
    gap: ${o("card.body.gap")};
}

.p-card-title {
    font-size: ${o("card.title.font.size")};
    font-weight: ${o("card.title.font.weight")};
}

.p-card-subtitle {
    color: ${o("card.subtitle.color")};
}
`,Ct={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},We=(()=>{class o extends Z{name="card";theme=vt;classes=Ct;static \u0275fac=(()=>{let e;return function(t){return(e||(e=P(o)))(t||o)}})();static \u0275prov=R({token:o,factory:o.\u0275fac})}return o})();var wt=(()=>{class o extends X{header;subheader;set style(e){Se(this._style(),e)||this._style.set(e)}styleClass;headerFacet;footerFacet;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;_headerTemplate;_titleTemplate;_subtitleTemplate;_contentTemplate;_footerTemplate;_style=O(null);_componentStyle=F(We);getBlockableElement(){return this.el.nativeElement.children[0]}templates;ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"title":this._titleTemplate=e.template;break;case"subtitle":this._subtitleTemplate=e.template;break;case"content":this._contentTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;default:this._contentTemplate=e.template;break}})}static \u0275fac=(()=>{let e;return function(t){return(e||(e=P(o)))(t||o)}})();static \u0275cmp=U({type:o,selectors:[["p-card"]],contentQueries:function(i,t,n){if(i&1&&(D(n,xe,5),D(n,De,5),D(n,nt,4),D(n,at,4),D(n,it,4),D(n,ot,4),D(n,st,4),D(n,Ee,4)),i&2){let s;E(s=I())&&(t.headerFacet=s.first),E(s=I())&&(t.footerFacet=s.first),E(s=I())&&(t.headerTemplate=s.first),E(s=I())&&(t.titleTemplate=s.first),E(s=I())&&(t.subtitleTemplate=s.first),E(s=I())&&(t.contentTemplate=s.first),E(s=I())&&(t.footerTemplate=s.first),E(s=I())&&(t.templates=s)}},inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},features:[K([We]),H],ngContentSelectors:lt,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[4,"ngIf"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(i,t){i&1&&(J(rt),m(0,"div",0),M(1,dt,3,1,"div",1),m(2,"div",2),M(3,pt,3,2,"div",3)(4,bt,3,2,"div",4),m(5,"div",5),V(6),M(7,ft,1,0,"ng-container",6),u(),M(8,_t,3,1,"div",7),u()()),i&2&&(W(t.styleClass),g("ngClass","p-card p-component")("ngStyle",t._style()),z("data-pc-name","card"),h(),g("ngIf",t.headerFacet||t.headerTemplate||t._headerTemplate),h(2),g("ngIf",t.header||t.titleTemplate||t._titleTemplate),h(),g("ngIf",t.subheader||t.subtitleTemplate||t._subtitleTemplate),h(3),g("ngTemplateOutlet",t.contentTemplate||t._contentTemplate),h(),g("ngIf",t.footerFacet||t.footerTemplate||t._footerTemplate))},dependencies:[Y,_e,ve,we,Ce,k],encapsulation:2,changeDetection:0})}return o})(),Ke=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=G({type:o});static \u0275inj=j({imports:[wt,k,k]})}return o})();var ee=class o{supabase=F(Te).supabase;firstNames=["Alex","Blake","Casey","Dana","Eli","Finn","Grace","Harper","Indie","Jules","Kai","Luna","Max","Nova","Oliver","Parker","Quinn","River","Sage","Taylor","Uma","Vale","West","Xara","Yuki","Zara","Ash","Bryce","Cedar","Drew","Echo","Fern","Gale","Haven","Iris","Jax","Koda","Lake","Mars","Noel"];lastNames=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Hernandez","Lopez","Gonzalez","Wilson","Anderson","Thomas","Taylor","Moore","Jackson","Martin","Lee","Perez","Thompson","White","Harris","Sanchez","Clark","Ramirez","Lewis","Robinson"];bookTitles=["The Midnight Library","Dune","To Kill a Mockingbird","1984","Pride and Prejudice","The Great Gatsby","Harry Potter","Lord of the Rings","The Catcher in the Rye","Brave New World","The Hobbit","Jane Eyre","Wuthering Heights","The Chronicles of Narnia","Animal Farm","Fahrenheit 451","The Handmaid's Tale","Gone Girl","The Girl with the Dragon Tattoo","The Kite Runner"];authors=["Matt Haig","Frank Herbert","Harper Lee","George Orwell","Jane Austen","F. Scott Fitzgerald","J.K. Rowling","J.R.R. Tolkien","J.D. Salinger","Aldous Huxley","Charlotte Bront\xEB","Emily Bront\xEB","C.S. Lewis","Ray Bradbury","Margaret Atwood","Gillian Flynn","Stieg Larsson","Khaled Hosseini","Stephen King","Agatha Christie"];genres=["Fiction","Non-Fiction","Mystery","Romance","Science Fiction","Fantasy","Horror","Biography","History","Poetry","Drama","Thriller","Adventure"];languages=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese"},{code:"ar",name:"Arabic"}];clubNames=["Book Lovers United","The Reading Circle","Literary Minds","Page Turners","The Book Club","Reading Adventures","Story Seekers","Novel Ideas","Bookworms Anonymous","The Literary Society","Reading Enthusiasts","Chapter & Verse","The Book Nook","Literary Legends","Reading Rainbow"];readingInterests=["Science Fiction","Fantasy","Mystery","Romance","Horror","Biography","History","Poetry","Drama","Thriller","Adventure","Philosophy","Psychology","Self-Help","Travel","Cooking","Art","Music"];emojis=["\u{1F44D}","\u2764\uFE0F","\u{1F60A}","\u{1F389}","\u{1F44F}","\u{1F525}","\u{1F4AF}","\u2B50","\u{1F4DA}","\u2728"];languageProficiencyDbValues=["learning","fluent","native"];roomStatusDbValues=["pending","live","ended","scheduled","cancelled"];textContentTypeDbValues=["book","article","short-story","script","poetry","other"];notificationTypeDbValues=["invitation","accepted","message","reminder","comment","new_follower","stage_starting","practice_invite","club_invite","new_club_post"];audienceRoleDbValues=["listener","speaker","raised_hand"];clubRoleDbValues=["member","admin","owner"];readingLevelDbValues=["beginner","intermediate","advanced"];randomElement(a){return a[Math.floor(Math.random()*a.length)]}randomElements(a,e){return[...a].sort(()=>.5-Math.random()).slice(0,Math.min(e,a.length))}randomDate(a,e){return new Date(a.getTime()+Math.random()*(e.getTime()-a.getTime()))}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let e=Math.random()*16|0;return(a=="x"?e:e&3|8).toString(16)})}generateUsername(){let a=this.randomElement(this.firstNames).toLowerCase(),e=Math.floor(Math.random()*1e3);return`${a}${e}`}generateEmail(a){let e=["gmail.com","yahoo.com","hotmail.com","outlook.com","example.com"];return`${a}@${this.randomElement(e)}`}clearDatabase(){return p(this,null,function*(){console.log("Clearing existing data..."),yield this.supabase.from("reactions").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("annotations").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("chat_messages").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("reading_turns").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("audience_members").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("notifications").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("club_memberships").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("rooms").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("text_contents").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("clubs").delete().neq("id","00000000-0000-0000-0000-000000000000"),yield this.supabase.from("users").delete().neq("id","00000000-0000-0000-0000-000000000000")})}seedUsers(){return p(this,null,function*(){console.log("Seeding users...");let a=Array.from({length:100}).map(()=>{let t=this.randomElement(this.firstNames),n=this.randomElement(this.lastNames),s=this.generateUsername(),r=this.randomDate(new Date("2023-01-01"),new Date),c=new Date,b=this.randomElements(this.readingInterests,Math.floor(Math.random()*5)+1),l=this.randomElements(this.languages,Math.floor(Math.random()*3)+1).map(B=>({code:B.code,proficiency:this.randomElement(["learning","fluent","native"])})),T=[],x=[],d=[],te={stagesHosted:Math.floor(Math.random()*20),kudosReceived:Math.floor(Math.random()*100),partnersReadWith:Math.floor(Math.random()*30)},ne=Math.random()>.7,ae=this.randomDate(new Date(Date.now()-7*24*60*60*1e3),new Date),N=Math.random()>.8?this.randomElement(["Super Reader","Book Enthusiast","Reading Mentor"]):void 0,ie=N?"Awarded for outstanding contribution to the reading community":void 0,oe=Math.random()>.5?"A passionate reader and club member.":void 0,f=this.generateEmail(s);return{id:this.generateUUID(),username:s,displayName:`${t} ${n}`,profilePictureUrl:`https://api.dicebear.com/7.x/avataaars/svg?seed=${s}`,createdAt:r,updatedAt:c,email:f,bio:oe,readingInterests:b,languages:l,followers:T,following:x,blockedUsers:d,stats:te,isOnline:ne,lastActive:ae,badge:N,badgeDescription:ie}}),e=a.map(t=>({id:t.id,username:t.username,display_name:t.displayName,profile_picture_url:t.profilePictureUrl,created_at:t.createdAt.toISOString(),updated_at:t.updatedAt.toISOString(),bio:t.bio,email:t.email,reading_interests:t.readingInterests,languages:t.languages,followers:t.followers,following:t.following,blocked_users:t.blockedUsers,stats:t.stats,is_online:t.isOnline,last_active:t.lastActive?.toISOString(),badge:t.badge,badge_description:t.badgeDescription})),i=50;for(let t=0;t<e.length;t+=i)yield this.supabase.from("users").insert(e.slice(t,t+i));return a})}seedTextContents(a){return p(this,null,function*(){console.log("Seeding text contents...");let e=[],i=[];for(let n=0;n<100;n++){let s=this.randomElement(this.bookTitles),r=this.randomElement(this.authors),c=this.randomElement(this.genres),b=Math.floor(Math.random()*1e5)+1e4,l=this.randomDate(new Date("2023-01-01"),new Date),T=l,x=this.randomElement(["beginner","intermediate","advanced"]),d={id:this.generateUUID(),title:`${s} ${n>0?`- Volume ${n+1}`:""}`,author:r,content:`This is the content of ${s} by ${r}. Lorem ipsum dolor sit amet, consectetur adipiscing elit...`,type:this.randomElement(["book","article","short-story","script","poetry","other"]),genre:c,readingLevel:x,coverImageUrl:`https://picsum.photos/300/400?random=${n}`,uploaderId:this.randomElement(a).id,isPublicDomain:Math.random()>.7,wordCount:b,estimatedReadingTime:Math.ceil(b/200),rating:Math.round((Math.random()*4+1)*10)/10,createdAt:l,updatedAt:T};e.push(d),i.push({id:d.id,title:d.title,author:d.author,content:d.content,type:d.type,genre:d.genre,reading_level:d.readingLevel,cover_image_url:d.coverImageUrl,uploader_id:d.uploaderId,is_public_domain:d.isPublicDomain,word_count:d.wordCount,estimated_reading_time:d.estimatedReadingTime,rating:d.rating,created_at:d.createdAt.toISOString(),updated_at:d.updatedAt.toISOString()})}let t=50;for(let n=0;n<i.length;n+=t)yield this.supabase.from("text_contents").insert(i.slice(n,n+t));return console.log("Text contents seeded successfully"),e})}seedClubs(a){return p(this,null,function*(){console.log("Seeding clubs...");let e=[],i=[];for(let n=0;n<100;n++){let s=this.randomElement(a),r=this.randomDate(new Date("2023-01-01"),new Date),c=r,b=this.randomElements(this.genres,Math.floor(Math.random()*3)+1),l={id:this.generateUUID(),name:`${this.randomElement(this.clubNames)} ${n+1}`,description:`A wonderful book club focused on ${this.randomElement(this.genres)} literature. Join us for engaging discussions and literary adventures!`,coverImageUrl:`https://picsum.photos/400/200?random=${n+100}`,ownerId:s.id,isPublic:!0,language:this.randomElement(this.languages).code,genre:this.randomElement(this.genres),tags:b,weeklyMeetingTime:this.randomElement(["Monday 7PM","Wednesday 6PM","Friday 8PM","Sunday 3PM"]),activityLevel:this.randomElement(["Low","Medium","High"]),membershipType:this.randomElement(["Open","Invite Only","Application Required"]),createdAt:r,updatedAt:c,views:Math.floor(Math.random()*1e3),likes:Math.floor(Math.random()*200),rating:Math.round((Math.random()*4+1)*10)/10,currentlyReadingTitle:Math.random()>.5?this.randomElement(this.bookTitles):void 0,currentlyReadingAuthor:Math.random()>.5?this.randomElement(this.authors):void 0,nextMeeting:this.randomDate(new Date,new Date(Date.now()+7*24*60*60*1e3)),memberCount:0};e.push(l),i.push({id:l.id,name:l.name,description:l.description,cover_image_url:l.coverImageUrl,owner_id:l.ownerId,is_public:l.isPublic,language:l.language,genre:l.genre,tags:l.tags,weekly_meeting_time:l.weeklyMeetingTime,activity_level:l.activityLevel,membership_type:l.membershipType,created_at:l.createdAt.toISOString(),updated_at:l.updatedAt.toISOString(),views:l.views,likes:l.likes,rating:l.rating,currently_reading_title:l.currentlyReadingTitle??null,currently_reading_author:l.currentlyReadingAuthor??null,next_meeting:l.nextMeeting?.toISOString()??null,member_count:l.memberCount})}let t=50;for(let n=0;n<i.length;n+=t)yield this.supabase.from("clubs").insert(i.slice(n,n+t));return console.log("Clubs seeded successfully"),e})}seedClubMemberships(a,e){return p(this,null,function*(){console.log("Seeding club memberships...");let i=[];for(let n of a){i.push({club_id:n.id,user_id:n.ownerId,role:"owner",joined_at:n.createdAt.toISOString(),is_active:!0});let s=e.filter(d=>d.id!==n.ownerId),r=Math.floor(Math.random()*3),c=this.randomElements(s,r);for(let d of c)i.push({club_id:n.id,user_id:d.id,role:"admin",joined_at:n.createdAt.toISOString(),is_active:!0});let b=c.map(d=>d.id),l=e.filter(d=>d.id!==n.ownerId&&!b.includes(d.id)),T=Math.floor(Math.random()*20)+5,x=this.randomElements(l,T);for(let d of x)i.push({club_id:n.id,user_id:d.id,role:"member",joined_at:n.createdAt.toISOString(),is_active:!0})}let t=100;for(let n=0;n<i.length;n+=t)yield this.supabase.from("club_memberships").insert(i.slice(n,n+t));console.log("Club memberships seeded successfully")})}seedRooms(a,e,i){return p(this,null,function*(){console.log("Seeding rooms...");let t=[],n=[];for(let r=0;r<100;r++){let c=this.randomElement(e),b=this.randomElements(a,Math.floor(Math.random()*3)+1),l=Math.random()>.5?this.randomElement(i):void 0,T=this.randomDate(new Date,new Date(Date.now()+7*24*60*60*1e3)),x=Math.random()>.5?this.randomDate(T,new Date):void 0,d=Math.random()>.7&&x?this.randomDate(x,new Date):void 0,te=T,ne=T,ae=this.randomElements([c.genre,...this.readingInterests],Math.floor(Math.random()*3)+1),N=Math.random()>.5?this.randomElement(b).id:void 0,ie=Math.random()>.3?this.randomElements(a.map(B=>B.id),Math.floor(Math.random()*5)+1):void 0,oe=Math.random()>.3?Array.from({length:Math.floor(Math.random()*5)+1}).map(()=>{let B=this.randomElement(a),he=this.randomDate(T,new Date),Ze=Math.random()>.5?this.randomDate(he,new Date):void 0;return{userId:B.id,startedAt:he,endedAt:Ze,paragraphsRead:Math.floor(Math.random()*20)+1}}):void 0,f={id:this.generateUUID(),title:`Reading Session: ${c.title}`,description:`Join us for a collaborative reading session of ${c.title} by ${c.author}`,status:this.randomElement(["pending","live","ended","scheduled","cancelled"]),textContentId:c.id,language:this.randomElement(this.languages).code,bookClubId:l?.id,hosts:b,currentReaderId:N,currentPosition:{paragraphIndex:Math.floor(Math.random()*10),wordIndex:Math.floor(Math.random()*100)},readingOrder:ie,readingTurns:oe,audienceCount:Math.floor(Math.random()*50),scheduledTime:T,startTime:x,endTime:d,tags:ae,createdAt:te,updatedAt:ne};t.push(f),n.push({id:f.id,title:f.title,description:f.description,status:f.status,text_content_id:f.textContentId,language:f.language,book_club_id:f.bookClubId??null,current_reader_id:f.currentReaderId??null,scheduled_time:f.scheduledTime.toISOString(),start_time:f.startTime?.toISOString()??null,end_time:f.endTime?.toISOString()??null,tags:f.tags,created_at:f.createdAt.toISOString(),updated_at:f.updatedAt.toISOString(),audience_count:f.audienceCount,current_position:f.currentPosition,reading_order:f.readingOrder??null,reading_turns:f.readingTurns??null})}let s=50;for(let r=0;r<n.length;r+=s)yield this.supabase.from("rooms").insert(n.slice(r,r+s));return console.log("Rooms seeded successfully"),t})}seedRoomHosts(a,e){return p(this,null,function*(){console.log("Seeding room hosts...");let i=[];for(let n of a){let s=this.randomElements(e,Math.floor(Math.random()*3)+1);for(let r of s)i.push({room_id:n.id,user_id:r.id,assigned_at:this.randomDate(new Date(n.scheduledTime),new Date).toISOString()})}let t=100;for(let n=0;n<i.length;n+=t){let s=i.slice(n,n+t);yield this.supabase.from("room_hosts").insert(s)}console.log("Room hosts seeded successfully")})}seedAudienceMembers(a,e){return p(this,null,function*(){console.log("Seeding audience members...");let i=[];for(let n of a){let s=Math.floor(Math.random()*20)+5,r=this.randomElements(e,s);for(let c of r)i.push({user_id:c.id,room_id:n.id,role:this.randomElement(this.audienceRoleDbValues),joined_at:this.randomDate(new Date(n.scheduledTime),new Date).toISOString()})}let t=100;for(let n=0;n<i.length;n+=t){let s=i.slice(n,n+t);yield this.supabase.from("audience_members").insert(s)}console.log("Audience members seeded successfully")})}seedReadingTurns(a,e){return p(this,null,function*(){console.log("Seeding reading turns...");let i=[];for(let n=0;n<100;n++){let s=this.randomElement(a),r=this.randomElement(e),c=this.randomDate(new Date(s.scheduledTime),new Date),b=Math.random()>.3?this.randomDate(c,new Date):null,l={id:this.generateUUID(),room_id:s.id,user_id:r.id,started_at:c.toISOString(),ended_at:b?.toISOString()||null,paragraphs_read:Math.floor(Math.random()*20)+1};i.push(l)}let t=50;for(let n=0;n<i.length;n+=t){let s=i.slice(n,n+t);yield this.supabase.from("reading_turns").insert(s)}console.log("Reading turns seeded successfully")})}seedChatMessages(a,e){return p(this,null,function*(){console.log("Seeding chat messages...");let i=[];for(let n=0;n<100;n++){let s=this.randomElement(a),r=this.randomElement(e),c=["Great reading session!","I love this book!","Thanks for hosting!","This is my favorite chapter","Beautiful narration","Can't wait for the next part","The author's style is amazing","This reminds me of another book I read","What do you think about the main character?","The plot twist was unexpected!"],b={id:this.generateUUID(),context_id:s.id,author_id:r.id,content:this.randomElement(c),timestamp:this.randomDate(new Date(s.scheduledTime),new Date).toISOString(),type:"text"};i.push(b)}let t=50;for(let n=0;n<i.length;n+=t){let s=i.slice(n,n+t);yield this.supabase.from("chat_messages").insert(s)}console.log("Chat messages seeded successfully")})}seedAnnotations(a,e){return p(this,null,function*(){console.log("Seeding annotations...");let i=[];for(let n=0;n<100;n++){let s=this.randomElement(a),r=this.randomElement(e),c=["correction","note","question"],b=["Important passage","Beautiful metaphor","Key plot point","Character development","Foreshadowing","Symbolism here","Historical reference","Need to research this","Favorite quote"],l={id:this.generateUUID(),room_id:s.id,author_id:r.id,type:this.randomElement(c),text:this.randomElement(b),target_word:Math.random()>.5?this.randomElement(["metaphor","symbolism","character","plot"]):null,position:{paragraph:Math.floor(Math.random()*50),word:Math.floor(Math.random()*100)},created_at:this.randomDate(new Date(s.scheduledTime),new Date).toISOString(),resolved:Math.random()>.7};i.push(l)}let t=50;for(let n=0;n<i.length;n+=t){let s=i.slice(n,n+t);yield this.supabase.from("annotations").insert(s)}console.log("Annotations seeded successfully")})}seedReactions(a,e){return p(this,null,function*(){console.log("Seeding reactions...");let i=[];for(let n=0;n<100;n++){let s=this.randomElement(a),r=this.randomElement(e),c={id:this.generateUUID(),stage_id:s.id,author_id:r.id,emoji:this.randomElement(this.emojis),timestamp:this.randomDate(new Date(s.scheduledTime),new Date).toISOString(),target_paragraph_index:Math.random()>.5?Math.floor(Math.random()*50):null};i.push(c)}let t=50;for(let n=0;n<i.length;n+=t){let s=i.slice(n,n+t);yield this.supabase.from("reactions").insert(s)}console.log("Reactions seeded successfully")})}seedNotifications(a){return p(this,null,function*(){console.log("Seeding notifications...");let e=[];for(let t=0;t<100;t++){let n=this.randomElement(a),s=this.notificationTypeDbValues,r=["started following you","invited you to join their book club","invited you to a reading session","mentioned you in a discussion","liked your annotation"],c={id:this.generateUUID(),type:this.randomElement(s),from_user_id:n.id,to_user_id:this.randomElement(a).id,message:`${n.displayName} ${this.randomElement(r)}`,link:`/user/${n.id}`,is_read:Math.random()>.6,created_at:this.randomDate(new Date(Date.now()-30*24*60*60*1e3),new Date).toISOString(),is_archived:Math.random()>.8};e.push(c)}let i=50;for(let t=0;t<e.length;t+=i){let n=e.slice(t,t+i);yield this.supabase.from("notifications").insert(n)}console.log("Notifications seeded successfully")})}seedAll(){return p(this,null,function*(){try{console.log("Starting database seeding..."),yield this.clearDatabase();let a=yield this.seedUsers(),e=yield this.seedTextContents(a),i=yield this.seedClubs(a);yield this.seedClubMemberships(i,a);let t=yield this.seedRooms(a,e,i);yield this.seedRoomHosts(t,a),yield this.seedAudienceMembers(t,a),yield this.seedReadingTurns(t,a),yield this.seedChatMessages(t,a),yield this.seedAnnotations(t,a),yield this.seedReactions(t,a),yield this.seedNotifications(a),yield this.updateUserRelationships(a),console.log("Database seeding completed successfully!"),console.log("Summary:"),console.log("- 100 Users created"),console.log("- 100 User profiles created"),console.log("- 100 Text contents created"),console.log("- 100 Clubs created"),console.log("- Club memberships populated"),console.log("- 100 Rooms created"),console.log("- Audience members populated"),console.log("- 100 Reading turns populated"),console.log("- 100 Chat messages created"),console.log("- 100 Annotations created"),console.log("- 100 Reactions created"),console.log("- 100 Notifications created"),console.log("- User relationships updated")}catch(a){throw console.error("Error seeding database:",a),a}})}updateUserRelationships(a){return p(this,null,function*(){console.log("Updating user relationships...");for(let e of a)if(Math.random()>.5){let i=Math.floor(Math.random()*10)+1,t=this.randomElements(a.filter(r=>r.id!==e.id),i).map(r=>r.id),n=Math.floor(Math.random()*15)+1,s=this.randomElements(a.filter(r=>r.id!==e.id),n).map(r=>r.id);yield this.supabase.from("user_profiles").update({following:t,followers:s}).eq("user_id",e.id)}console.log("User relationships updated successfully")})}seedUsersOnly(){return p(this,null,function*(){return yield this.seedUsers()})}seedTextContentsOnly(a){return p(this,null,function*(){if(!a){let{data:e}=yield this.supabase.from("users").select("*");a=e||[]}return yield this.seedTextContents(a)})}seedClubsOnly(a){return p(this,null,function*(){if(!a){let{data:i}=yield this.supabase.from("users").select("*");a=i||[]}let e=yield this.seedClubs(a);return yield this.seedClubMemberships(e,a),e})}seedRoomsOnly(a,e,i){return p(this,null,function*(){if(!a){let{data:n}=yield this.supabase.from("users").select("*");a=n||[]}if(!e){let{data:n}=yield this.supabase.from("text_contents").select("*");e=n||[]}if(!i){let{data:n}=yield this.supabase.from("clubs").select("*");i=n||[]}let t=yield this.seedRooms(a,e,i);return yield this.seedRoomHosts(t,a),yield this.seedAudienceMembers(t,a),yield this.seedReadingTurns(t,a),t})}getRandomSample(a,e=10){return p(this,null,function*(){let{data:i}=yield this.supabase.from(a).select("*").limit(1e3);return!i||i.length===0?[]:this.randomElements(i,Math.min(e,i.length))})}addMoreData(a,e=50){return p(this,null,function*(){try{let{data:i}=yield this.supabase.from("users").select("*");if(!i||i.length===0)throw new Error("No users found. Please seed users first.");switch(a.toLowerCase()){case"clubs":let t=[];for(let r=0;r<e;r++){let c=this.randomElement(i),b=this.randomElements(i,Math.floor(Math.random()*20)+5),l=this.randomElements(b,Math.floor(Math.random()*3)+1);t.push({id:this.generateUUID(),name:`${this.randomElement(this.clubNames)} - New ${r+1}`,description:`A fresh book club focused on ${this.randomElement(this.genres)} literature.`,cover_image_url:`https://picsum.photos/400/200?random=${Date.now()+r}`,owner_id:c.id,created_at:new Date().toISOString(),tags:this.randomElements(this.genres,Math.floor(Math.random()*3)+1),language:this.randomElement(this.languages).code,weekly_meeting_time:this.randomElement(["Monday 7PM","Wednesday 6PM","Friday 8PM"]),genre:this.randomElement(this.genres),activity_level:this.randomElement(["Low","Medium","High"]),membership_type:this.randomElement(["Open","Invite Only"]),views:Math.floor(Math.random()*1e3),likes:Math.floor(Math.random()*200),admin_name:l[0].displayName,admin_messages:Math.floor(Math.random()*50),next_meeting:this.randomDate(new Date,new Date(Date.now()+7*24*60*60*1e3)).toISOString(),rating:Math.round((Math.random()*4+1)*10)/10})}yield this.supabase.from("clubs").insert(t),console.log(`Added ${e} new clubs`);break;case"textcontents":case"texts":let{data:n}=yield this.supabase.from("text_contents").select("*"),s=[];for(let r=0;r<e;r++){let c=this.randomElement(this.bookTitles),b=this.randomElement(this.authors),l=Math.floor(Math.random()*1e5)+1e4;s.push({id:this.generateUUID(),title:`${c} - Extended Edition ${r+1}`,author:b,content:`Extended content for ${c} by ${b}...`,type:this.randomElement(["book","article","short_story"]),genre:this.randomElement(this.genres),reading_level:this.randomElement(["Beginner","Intermediate","Advanced"]),cover_image_url:`https://picsum.photos/300/400?random=${Date.now()+r+1e3}`,uploader_id:this.randomElement(i).id,is_public_domain:Math.random()>.7,word_count:l,estimated_reading_time:Math.ceil(l/200),rating:Math.round((Math.random()*4+1)*10)/10})}yield this.supabase.from("text_contents").insert(s),console.log(`Added ${e} new text contents`);break;default:throw new Error(`Unknown entity type: ${a}`)}}catch(i){throw console.error(`Error adding more ${a}:`,i),i}})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=R({token:o,factory:o.\u0275fac,providedIn:"root"})};var Mt=()=>({label:"Create Club",icon:"pi pi-plus",action:"create",severity:"white"}),St=o=>[o],xt=()=>({icon:"pi pi-users",title:"No Clubs Found",message:"Try adjusting your filters or search terms!"}),Dt=()=>({width:"90vw",maxWidth:"600px"}),Et=()=>({"960px":"95vw","640px":"100vw"});function It(o,a){if(o&1&&A(0,"app-club-card",21),o&2){let e=a.$implicit;g("club",e)}}function At(o,a){if(o&1){let e=ce();m(0,"div",22)(1,"app-popover-multiselect",23),w("selectionChange",function(t){y(e);let n=v();return _(n.onLanguagesChange(t))}),u(),m(2,"app-popover-multiselect",23),w("selectionChange",function(t){y(e);let n=v();return _(n.onGenresChange(t))}),u(),m(3,"app-popover-multiselect",23),w("selectionChange",function(t){y(e);let n=v();return _(n.onTypesChange(t))}),u(),m(4,"app-popover-multiselect",23),w("selectionChange",function(t){y(e);let n=v();return _(n.onActivityChange(t))}),u(),m(5,"app-popover-multiselect",23),w("selectionChange",function(t){y(e);let n=v();return _(n.onMembershipTypeChange(t))}),u(),m(6,"button",24),w("click",function(){y(e);let t=v();return _(t.toggleMyClubs())}),A(7,"i",25),C(8," My Clubs "),u()()}if(o&2){let e=v();h(),g("options",e.languageOptions)("selected",e.selectedLanguages())("label","Language")("icon","pi pi-globe")("placeholder","Choose languages...")("maxDisplayItems",3),h(),g("options",e.genreOptions)("selected",e.selectedGenres())("label","Genre")("icon","pi pi-book")("placeholder","Choose genres...")("maxDisplayItems",3),h(),g("options",e.privacyOptions)("selected",e.selectedTypes())("label","Privacy")("icon","pi pi-lock")("placeholder","Choose privacy...")("maxDisplayItems",2),h(),g("options",e.activityOptions)("selected",e.selectedActivity())("label","Activity")("icon","pi pi-chart-line")("placeholder","Choose activity...")("maxDisplayItems",1),h(),g("options",e.membershipOptions)("selected",e.selectedMembershipTypes())("label","Membership")("icon","pi pi-user-plus")("placeholder","Choose membership...")("maxDisplayItems",2),h(),q("bg-rose-100",e.showJoinedOnly())("text-rose-700",e.showJoinedOnly())("border-rose-200",e.showJoinedOnly())("bg-slate-100",!e.showJoinedOnly())("text-slate-700",!e.showJoinedOnly())("border-slate-200",!e.showJoinedOnly())("hover:bg-rose-50",!e.showJoinedOnly()),z("aria-label","Show my clubs only")}}var Ye=class o{constructor(a,e){this.clubService=a;this.seedService=e}clubs=O([]);loading=O(!1);error=O(null);search=S("");showJoinedOnly=S(!1);selectedLanguages=S([]);selectedGenres=S([]);selectedTypes=S([]);selectedActivity=S([]);selectedMembershipTypes=S([]);sortBy=S("best-match");createClubDialogOpen=S(!1);activeFilters=O([]);languageOptions=Je.map(a=>({label:a.name,value:a.code}));sortOptions=[{label:"Best Match",value:"best-match"},{label:"Most Members",value:"most-members"},{label:"Recently Active",value:"recently-active"},{label:"Newest",value:"newest"},{label:"A-Z",value:"az"}];genreOptions=[{label:"Fiction",value:"Fiction"},{label:"Poetry",value:"Poetry"},{label:"Mystery",value:"Mystery"},{label:"Philosophy",value:"Philosophy"}];privacyOptions=[{label:"Public",value:"Public"},{label:"Private",value:"Private"}];membershipOptions=[{label:"Open",value:"Open"},{label:"Approval",value:"Approval"}];activityOptions=[{label:"Very Active",value:"Very Active"},{label:"Active",value:"Active"},{label:"Casual",value:"Casual"}];ngOnInit(){this.fetchClubs()}fetchClubs(){return p(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let a=yield this.clubService.getClubs({search:this.search(),languages:this.selectedLanguages(),genres:this.selectedGenres(),types:this.selectedTypes(),activity:this.selectedActivity(),membershipTypes:this.selectedMembershipTypes(),sortBy:this.sortBy()});this.clubs.set(a.clubs)}catch(a){this.error.set(a.message||"Failed to load clubs")}finally{this.loading.set(!1)}})}onSearchChange(a){this.search.set(a),this.fetchClubs()}onLanguagesChange(a){this.selectedLanguages.set(a),this.fetchClubs()}onGenresChange(a){this.selectedGenres.set(a),this.fetchClubs()}onTypesChange(a){this.selectedTypes.set(a),this.fetchClubs()}onActivityChange(a){this.selectedActivity.set(a),this.fetchClubs()}onMembershipTypeChange(a){this.selectedMembershipTypes.set(a),this.fetchClubs()}onSortChange(a){this.sortBy.set(Array.isArray(a)?a[0]??"best-match":a),this.fetchClubs()}getTotalResults(){return this.clubs().length}openCreateClubDialog(){this.createClubDialogOpen.set(!0)}closeCreateClubDialog(){this.createClubDialogOpen.set(!1)}toggleMyClubs(){this.showJoinedOnly.update(a=>!a),this.fetchClubs()}removeFilterFromState(a){if(!["language","genre","type","activity","membershipType","joinedOnly"].includes(a.key))return;let i=a;switch(i.key){case"language":this.selectedLanguages.update(t=>t.filter(n=>n!==i.value));break;case"genre":this.selectedGenres.update(t=>t.filter(n=>n!==i.value));break;case"type":this.selectedTypes.update(t=>t.filter(n=>n!==i.value));break;case"activity":this.selectedActivity.set([]);break;case"membershipType":this.selectedMembershipTypes.update(t=>t.filter(n=>n!==i.value));break;case"joinedOnly":this.showJoinedOnly.set(!1);break}this.fetchClubs()}clearAllFiltersFromState(){this.search.set(""),this.showJoinedOnly.set(!1),this.selectedLanguages.set([]),this.selectedGenres.set([]),this.selectedTypes.set([]),this.selectedActivity.set([]),this.selectedMembershipTypes.set([]),this.sortBy.set("best-match"),this.fetchClubs()}applySorting(a){let e=this.sortBy(),i=[...a];switch(e){case"most-members":return i.sort((t,n)=>(n.memberCount??0)-(t.memberCount??0));case"recently-active":case"newest":return i.sort((t,n)=>n.createdAt.getTime()-t.createdAt.getTime());case"az":return i.sort((t,n)=>t.name.localeCompare(n.name));case"best-match":default:return i}}updateActiveFilters(){let a=[];this.selectedLanguages().forEach(e=>{let i=this.languageOptions.find(t=>t.value===e);a.push({key:"language",value:e,label:i?i.label:e})}),this.selectedGenres().forEach(e=>{a.push({key:"genre",value:e,label:e})}),this.selectedTypes().forEach(e=>{a.push({key:"type",value:e,label:e})}),this.selectedActivity().length>0&&a.push({key:"activity",value:this.selectedActivity().join(", "),label:this.selectedActivity().join(", ")}),this.selectedMembershipTypes().forEach(e=>{a.push({key:"membershipType",value:e,label:e})}),this.showJoinedOnly()&&a.push({key:"joinedOnly",value:"true",label:"My Clubs Only"}),this.activeFilters.set(a)}static \u0275fac=function(e){return new(e||o)(se(Me),se(ee))};static \u0275cmp=U({type:o,selectors:[["app-club-list-page"]],inputs:{search:[1,"search"],showJoinedOnly:[1,"showJoinedOnly"],selectedLanguages:[1,"selectedLanguages"],selectedGenres:[1,"selectedGenres"],selectedTypes:[1,"selectedTypes"],selectedActivity:[1,"selectedActivity"],selectedMembershipTypes:[1,"selectedMembershipTypes"],sortBy:[1,"sortBy"],createClubDialogOpen:[1,"createClubDialogOpen"]},outputs:{search:"searchChange",showJoinedOnly:"showJoinedOnlyChange",selectedLanguages:"selectedLanguagesChange",selectedGenres:"selectedGenresChange",selectedTypes:"selectedTypesChange",selectedActivity:"selectedActivityChange",selectedMembershipTypes:"selectedMembershipTypesChange",sortBy:"sortByChange",createClubDialogOpen:"createClubDialogOpenChange"},decls:38,vars:35,consts:[["clubCardTemplate",""],["clubFilters",""],[1,"min-h-screen"],[3,"searchChange","actionClick","removeFilter","clearAllFilters","title","subtitle","showSearch","searchPlaceholder","showSort","sortOptions","sortPlaceholder","selectedSort","filterTemplate","showViewToggle","actionButtons","showResultsCounter","resultsCountLabel","resultsCountUpdatedLabel","activeFilters"],[1,"mx-auto"],[3,"sortChanged","title","icon","items","emptyState","cardTemplate","showMoreLabel","colorClass","sortOptions","buttonColorClass","showSort"],["header","Create a New Club","styleClass","rounded-2xl overflow-hidden shadow-2xl",3,"visibleChange","onHide","visible","modal","breakpoints"],[1,"p-6"],[1,"text-center","mb-6"],[1,"w-16","h-16","bg-emerald-500","rounded-2xl","flex","items-center","justify-center","mx-auto","mb-4"],[1,"pi","pi-plus","text-white","text-2xl"],[1,"text-2xl","font-bold","text-slate-900","mb-2"],[1,"text-slate-600"],[1,"bg-slate-50","rounded-xl","p-4","mb-6"],[1,"font-semibold","text-slate-900","mb-2"],[1,"space-y-2","text-sm","text-slate-600"],[1,"flex","items-center","gap-2"],[1,"pi","pi-check","text-green-600"],[1,"flex","flex-col","sm:flex-row","gap-3"],["pButton","","pRipple","","type","button",1,"flex-1","px-6","py-3","bg-emerald-600","hover:bg-emerald-700","text-white","font-semibold","rounded-xl","transition-all","duration-200",3,"click"],["pButton","","pRipple","","type","button",1,"px-6","py-3","border","border-slate-300","text-slate-700","bg-white","hover:bg-slate-50","font-medium","rounded-xl","transition-colors","duration-200",3,"click"],[3,"club"],[1,"flex","flex-wrap","gap-2","mb-2"],[3,"selectionChange","options","selected","label","icon","placeholder","maxDisplayItems"],["pButton","",1,"px-4","py-2","text-sm","font-medium","border","transition-all","duration-200",3,"click"],[1,"pi","pi-user","mr-2","text-xs"]],template:function(e,i){if(e&1){let t=ce();m(0,"div",2)(1,"app-page-header",3),w("searchChange",function(s){return y(t),_(i.onSearchChange(s))})("actionClick",function(){return y(t),_(i.openCreateClubDialog())})("removeFilter",function(s){return y(t),_(i.removeFilterFromState(s))})("clearAllFilters",function(){return y(t),_(i.clearAllFiltersFromState())}),u(),m(2,"main",4)(3,"app-explore-section",5),w("sortChanged",function(s){return y(t),_(i.onSortChange(s))}),u()(),m(4,"p-dialog",6),fe("visibleChange",function(s){return y(t),be(i.createClubDialogOpen,s)||(i.createClubDialogOpen=s),_(s)}),w("onHide",function(){return y(t),_(i.closeCreateClubDialog())}),m(5,"div",7)(6,"div",8)(7,"div",9),A(8,"i",10),u(),m(9,"h2",11),C(10,"Start Your Reading Journey"),u(),m(11,"p",12),C(12,"Create a vibrant community where book lovers can connect, discuss, and grow together."),u()(),m(13,"div",13)(14,"h3",14),C(15,"What you can do:"),u(),m(16,"ul",15)(17,"li",16),A(18,"i",17),C(19," Set reading schedules and book selections "),u(),m(20,"li",16),A(21,"i",17),C(22," Host virtual and in-person discussions "),u(),m(23,"li",16),A(24,"i",17),C(25," Customize privacy and membership settings "),u(),m(26,"li",16),A(27,"i",17),C(28," Track reading progress and achievements "),u()()(),m(29,"div",18)(30,"button",19),w("click",function(){return y(t),_(i.closeCreateClubDialog())}),C(31," Get Started "),u(),m(32,"button",20),w("click",function(){return y(t),_(i.closeCreateClubDialog())}),C(33," Maybe Later "),u()()()()(),M(34,It,1,1,"ng-template",null,0,ue)(36,At,9,45,"ng-template",null,1,ue)}if(e&2){let t=de(35),n=de(37);h(),g("title","Book Clubs")("subtitle","Discover and join reading communities")("showSearch",!0)("searchPlaceholder","Search clubs by name, genre, or description...")("showSort",!0)("sortOptions",i.sortOptions)("sortPlaceholder","Sort by")("selectedSort",i.sortBy())("filterTemplate",n)("showViewToggle",!1)("actionButtons",ye(30,St,$(29,Mt)))("showResultsCounter",!0)("resultsCountLabel",i.getTotalResults()+" clubs found")("resultsCountUpdatedLabel","Updated just now")("activeFilters",i.activeFilters()),h(2),g("title","All Clubs")("icon","")("items",i.clubs())("emptyState",$(32,xt))("cardTemplate",t)("colorClass","")("sortOptions",i.sortOptions)("buttonColorClass","bg-blue-100 text-blue-800")("showSort",!0),h(),Q($(33,Dt)),ge("visible",i.createClubDialogOpen),g("modal",!0)("breakpoints",$(34,Et))}},dependencies:[ke,Oe,Ue,Le,Pe,Be,Ve,Re,Ie,Qe,Ke,Ne,$e,je,Ae,Fe,He,Ge,ze],encapsulation:2,changeDetection:0})};export{Ye as ClubListPage};
