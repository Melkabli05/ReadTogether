import{a as P,b as F}from"./chunk-NZG7WEQN.js";import{a as T,f as N,h as L,j as H,y as $}from"./chunk-5KZPAB2C.js";import{c as B,d as k}from"./chunk-PMCC7NH4.js";import{Cb as p,Ma as o,Rb as s,Sb as x,T as h,Tb as u,Xa as b,bc as w,ga as v,hc as U,jc as I,mb as f,nb as g,ob as R,pb as C,pc as c,qb as _,qc as y,rb as d,sb as r,tb as l,tc as E,ub as m}from"./chunk-24QFR54W.js";var A=e=>({"ring-2 ring-green-300":e}),D=(e,n)=>n.id;function M(e,n){if(e&1&&m(0,"img",3),e&2){let t,i,a=p();d("ngSrc",((t=a.hostUser())==null?null:t.profilePictureUrl)??"")("alt",((i=a.hostUser())==null?null:i.displayName)??"Host")}}function O(e,n){if(e&1&&(r(0,"span",4),s(1),l()),e&2){let t,i,a=p();d("title",((t=a.hostUser())==null?null:t.displayName)??"Host"),o(),u(" ",((i=a.hostUser())==null||i.displayName==null?null:i.displayName.charAt(0))??"U"," ")}}function z(e,n){if(e&1&&m(0,"img",21),e&2){let t,i,a=p(2);d("ngSrc",((t=a.resolvedCurrentReader())==null?null:t.profilePictureUrl)??"")("alt",((i=a.resolvedCurrentReader())==null?null:i.displayName)??"Current Reader")}}function V(e,n){e&1&&(r(0,"span",24),s(1,"(Host)"),l())}function W(e,n){if(e&1&&(r(0,"div",9),f(1,z,1,2,"img",21),r(2,"span",22),s(3),l(),m(4,"i",23),f(5,V,2,0,"span",24),l()),e&2){let t,i,a=p();o(),g((t=a.resolvedCurrentReader())!=null&&t.profilePictureUrl?1:-1),o(2),x(((i=a.resolvedCurrentReader())==null?null:i.displayName)??"Unknown"),o(2),g(a.isHostCurrentReader()?5:-1)}}function q(e,n){if(e&1&&(r(0,"div",10),m(1,"i",25),r(2,"span",26),s(3),U(4,"date"),l()()),e&2){let t=p();o(3),u("Starts at ",I(4,1,t.room().scheduledTime,"shortTime"))}}function J(e,n){if(e&1&&m(0,"img",27),e&2){let t=p().$implicit;d("ngSrc",t.profilePictureUrl)("alt",t.displayName)("title",t.displayName)}}function G(e,n){if(e&1&&(r(0,"span",28),s(1),l()),e&2){let t=p().$implicit;d("title",t.displayName),o(),u(" ",t.displayName?t.displayName.charAt(0):t.username?t.username.charAt(0):"?"," ")}}function K(e,n){if(e&1&&f(0,J,1,3,"img",27)(1,G,2,2,"span",28),e&2){let t=n.$implicit;g(t.profilePictureUrl?0:1)}}function Q(e,n){if(e&1&&(r(0,"span",19),s(1),l()),e&2){let t=n.$implicit;o(),u(" ",t," ")}}var j=class e{room=E.required();RoomStatus=B;userService=h(k);roomService=h(P);textService=h(F);resolvedHosts=v([]);resolvedTextContent=v(void 0);resolvedCurrentReader=v(void 0);constructor(){y(()=>{let n=this.room().id;this.roomService.getRoomHosts(n).then(t=>{let i=t.map(a=>a.userId);this.userService.getUsersByIds(i).then(a=>{this.resolvedHosts.set(a)})})}),y(()=>{let n=this.room().textContentId;n&&this.textService.getTextContentTitle(n).then(t=>{this.resolvedTextContent.set(t??void 0)})}),y(()=>{let n=this.room().currentReaderId;n&&this.userService.getUser(n).then(t=>{this.resolvedCurrentReader.set(t??void 0)})})}hostUser=c(()=>this.resolvedHosts()[0]);isHostCurrentReader=c(()=>this.room().currentReaderId===this.hostUser()?.id);statusLabel=c(()=>X(this.room().status));statusBadgeClass=c(()=>({"bg-green-100 text-green-700":this.room().status==="live","bg-yellow-100 text-yellow-700":this.room().status==="scheduled","bg-gray-100 text-gray-600":this.room().status==="ended","bg-red-100 text-red-700":this.room().status==="cancelled"}));actionLabel=c(()=>Y(this.room().status));actionIcon=c(()=>{let n=this.room().status;return n==="live"?"pi pi-microphone":n==="scheduled"?"pi pi-sign-in":null});actionSeverity=c(()=>{let n=this.room().status;return n==="live"||n==="scheduled"?"primary":"secondary"});isOutlined=c(()=>this.room().status!=="live");static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-room-card"]],inputs:{room:[1,"room"]},decls:35,vars:20,consts:[["tabindex","0",1,"rounded-2xl","p-4","sm:p-5","bg-white","shadow-md","border","border-gray-100","transition","hover:shadow-lg","cursor-pointer","flex","flex-col","gap-3","w-full","fixed-room-card-height",3,"ngClass"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-3"],["width","40","height","40",1,"w-10","h-10","rounded-full","border","border-gray-200","shadow",3,"ngSrc","alt"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-full","bg-gray-300","text-gray-600","border","border-gray-200","text-lg","font-bold",3,"title"],[1,"text-base","font-semibold","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"text-xs","px-2","py-0.5","rounded-full","font-medium",3,"ngClass"],[1,"text-sm","text-gray-600","line-clamp-2","min-h-[2rem]"],[1,"flex","items-center","gap-2","bg-green-50","border","border-green-200","rounded-lg","p-2"],[1,"flex","items-center","gap-2","bg-yellow-50","border","border-yellow-200","rounded-lg","p-2"],[1,"flex","flex-wrap","gap-2","mt-1","text-xs","text-gray-700"],[1,"flex","items-center","gap-1"],[1,"pi","pi-users"],[1,"pi","pi-globe"],[1,"text-sm","text-gray-800"],[1,"font-medium"],[1,"flex","items-center","-space-x-3","mt-2"],[1,"flex","flex-wrap","gap-1","mt-2"],[1,"px-2","py-0.5","rounded","bg-blue-100","text-blue-700","text-xs","font-medium"],[1,"mt-auto",3,"label","icon","severity","outlined","size","fullWidth"],["width","32","height","32",1,"w-6","h-6","sm:w-8","sm:h-8","rounded-full","border-white","shadow",3,"ngSrc","alt"],[1,"text-green-700","font-medium","text-sm"],[1,"pi","pi-microphone","text-green-700","text-sm"],[1,"text-xs","text-green-600","ml-1"],[1,"pi","pi-clock","text-yellow-700"],[1,"text-sm","text-yellow-800"],["width","24","height","24",1,"w-6","h-6","rounded-full","border-2","border-white","shadow",3,"ngSrc","alt","title"],[1,"w-6","h-6","flex","items-center","justify-center","rounded-full","bg-gray-300","text-gray-600","border-2","border-white","text-xs","font-bold",3,"title"]],template:function(t,i){if(t&1&&(r(0,"article",0)(1,"div",1)(2,"div",2),f(3,M,1,2,"img",3)(4,O,2,2,"span",4),r(5,"div")(6,"h3",5),s(7),l(),r(8,"p",6),s(9),l()()(),r(10,"span",7),s(11),l()(),r(12,"p",8),s(13),l(),f(14,W,6,3,"div",9),f(15,q,5,4,"div",10),r(16,"div",11)(17,"div",12),m(18,"i",13),s(19),l(),r(20,"div",12),m(21,"i",14),r(22,"span"),s(23),l()()(),r(24,"div",15)(25,"span",16),s(26,"Text :"),l(),s(27),l(),r(28,"div",17),C(29,K,2,1,null,null,D),l(),r(31,"div",18),C(32,Q,2,1,"span",19,R),l(),m(34,"app-button",20),l()),t&2){let a,S;d("ngClass",w(18,A,i.room().status===i.RoomStatus.Live)),o(3),g((a=i.hostUser())!=null&&a.profilePictureUrl?3:4),o(4),x(i.room().title),o(2),u("Host: ",((S=i.hostUser())==null?null:S.displayName)??"Unknown"),o(),d("ngClass",i.statusBadgeClass()),o(),u(" ",i.statusLabel()," "),o(2),x(i.room().description),o(),g(i.room().status===i.RoomStatus.Live&&i.resolvedCurrentReader()?14:-1),o(),g(i.room().status===i.RoomStatus.Scheduled?15:-1),o(4),u(" ",i.room().audienceCount," audience "),o(4),x(i.room().language),o(4),u(" ",i.resolvedTextContent()||"Unknown"," "),o(2),_(i.resolvedHosts()),o(3),_(i.room().tags),o(2),d("label",i.actionLabel())("icon",i.actionIcon())("severity",i.actionSeverity())("outlined",i.isOutlined())("size","sm")("fullWidth",!0)}},dependencies:[L,T,N,H,$],styles:[".fixed-room-card-height[_ngcontent-%COMP%]{min-height:27rem;height:27rem}"]})};function X(e){switch(e){case"live":return"Live";case"scheduled":return"Upcoming";case"ended":return"Ended";case"cancelled":return"Cancelled";default:return""}}function Y(e){switch(e){case"live":return"Join Room";case"scheduled":return"RSVP";case"ended":return"View Recap";default:return"View"}}export{j as a};
